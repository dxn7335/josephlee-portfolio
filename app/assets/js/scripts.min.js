/*!
 * josephlee-portfolio
 * Joseph Lee - UX/Visual Designer
 * http://mingtastic.com
 * @author Danny Nguyen (danny-nguyen.com)
 * @version 1.0.0
 * Copyright 2015. MIT licensed.
 */
"use strict";var app=angular.module("App",["ui.router","home.controller","work.controller","header.controller","about.controller","workHeader.controller","worknav.controller"]).config(function($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.when("/work","/about","/"),$urlRouterProvider.otherwise("/"),$stateProvider.state("work",{url:"/work/:id",views:{header:{templateUrl:"assets/templates/global/work-header.html",controller:"workHeaderController"},"work-sect":{templateUrl:function($stateParams){return console.log($stateParams.id),"assets/templates/"+$stateParams.id+".html"},controller:"workController"},"work-nav":{templateUrl:"assets/templates/global/work-navigation.html",controller:"workNavController"},footer:{templateUrl:"assets/templates/global/footer.html"}}}).state("about",{url:"/about/",views:{header:{templateUrl:"assets/templates/global/header.html",controller:"headerController"},about:{templateUrl:"assets/templates/about.html",controller:"aboutController"},footer:{templateUrl:"assets/templates/global/footer.html"}}}).state("home",{url:"/",views:{header:{templateUrl:"assets/templates/global/header.html",controller:"headerController"},home:{templateUrl:"assets/templates/home.html",controller:"homeController"},footer:{templateUrl:"assets/templates/global/footer.html"}}})});angular.module("data.service",[]).service("dataService",["$q","$http",function($q,$http){function makeRequest(){return $http.get("assets/data/workConfig.json").then(function(resp){return resp.data})}this.promise=null,this.getPromise=function(update){return(update||!this.promise)&&(this.promise=makeRequest()),this.promise}}]),angular.module("about.controller",[]).controller("aboutController",["$scope","$sce","$stateParams","$timeout",function($scope,$sce,$stateParams,$timeout){$("body").addClass("home"),$timeout(function(){},0)}]),angular.module("header.controller",[]).controller("headerController",["$scope","$sce","$stateParams","$timeout","$location",function($scope,$sce,$stateParams,$timeout,$location){$timeout(function(){var distance=$("#home-nav").height()+60;$(window).scroll(function(){$(window).scrollTop()>=distance?$("#scroll-nav").addClass("show"):$("#scroll-nav").removeClass("show")}),$("#home-nav .nav-links a").removeClass("active"),-1!=$location.$$path.indexOf("about")?$("#home-nav .nav-links a[data-target='about']").addClass("active"):$("#home-nav .nav-links a[data-target='home']").addClass("active")},0),$(".mobilemenu-btn").on("click",function(e){e.preventDefault();var toggle=$(".mobilemenu-btn").data("toggle")||0;switch(toggle){case 0:$(".mobilemenu-btn").addClass("click"),$("body").addClass("mobile-open"),$("#mobile-nav").fadeIn(300);break;case 1:$(".mobilemenu-btn").removeClass("click"),$("body").removeClass("mobile-open"),$("#mobile-nav").fadeOut(300)}toggle++,toggle>1&&(toggle=0),console.log(toggle),$(".mobilemenu-btn").data("toggle",toggle)}),$("#mobile-nav .nav-links a, a.logo").on("click",function(){$(".mobilemenu-btn").data("toggle",0),$(".mobilemenu-btn").removeClass("click"),$("body").removeClass("mobile-open"),$("#mobile-nav").fadeOut(300)})}]).run(function(){}),angular.module("home.controller",["data.service"]).controller("homeController",["$scope","$sce","$stateParams","dataService",function($scope,$sce,$stateParams,dataService){$("body").addClass("home"),$("html, body").animate({scrollTop:0},"fast"),$scope.works=[],dataService.getPromise().then(function(data){$scope.works=data.works},function(err){console.log(err)})}]).directive("workItemRepeat",function(){return function(scope,element,attrs){scope.$last&&scope.$emit("LastElem")}}).directive("workItemContainer",function(){return function(scope,element,attrs){scope.$on("LastElem",function(event){setTimeout(function(){$(".workitem").each(function(i){var _this=this;setTimeout(function(){$(_this).addClass("active")},210*i)})},250),$(".workitem").on("click",function(e){setTimeout(function(){$(".workitem").each(function(i){var _this=this;setTimeout(function(){$(_this).removeClass("active")},200*i)})},150)})})}}),angular.module("work.controller",[]).controller("workController",["$scope","$sce","$stateParams","$timeout",function($scope,$sce,$stateParams,$timeout){$("body").removeClass("home"),$("html, body").animate({scrollTop:0},"fast"),$timeout(function(){$(".img-slider").slick({dots:!0,infinite:!0,arrows:!0,speed:400,slidesToShow:1}),$(".slick-slider").css("height","auto")},0)}]).run(function($rootScope){$rootScope.$on("$stateChangeSuccess",function(){$("html, body").animate({scrollTop:0},"fast")})}),angular.module("workHeader.controller",[]).controller("workHeaderController",["$scope","$sce","$stateParams","$timeout",function($scope,$sce,$stateParams,$timeout){$timeout(function(){var distance=1;$(window).scroll(function(){$(window).scrollTop()>=distance?$("#work-main-nav").addClass("scroll"):$("#work-main-nav").removeClass("scroll")}),$(".mobilemenu-btn").on("click",function(){var toggle=$(".mobilemenu-btn").data("toggle")||0;switch(toggle){case 0:$(".mobilemenu-btn").addClass("click"),$("body").addClass("mobile-open"),$("#mobile-nav").fadeIn(300);break;case 1:$(".mobilemenu-btn").removeClass("click"),$("body").removeClass("mobile-open"),$("#mobile-nav").fadeOut(300)}toggle++,toggle>1&&(toggle=0),$(".mobilemenu-btn").data("toggle",toggle)}),$("#mobile-nav .nav-links a").on("click",function(){$(".mobilemenu-btn").data("toggle",0),$(".mobilemenu-btn").removeClass("click"),$("body").removeClass("mobile-open"),$("#mobile-nav").fadeOut(300)})},0)}]).run(function(){}),angular.module("worknav.controller",["data.service"]).controller("workNavController",["$scope","$sce","$stateParams","dataService",function($scope,$sce,$stateParams,dataService){$scope.works=[],$scope.prev={},$scope.next={},dataService.getPromise().then(function(data){console.log($stateParams),$scope.works=data.works;for(var i=0;i<$scope.works.length;i++)$stateParams.id==$scope.works[i].id&&($scope.works[i-1]?$scope.prev={id:$scope.works[i-1].id}:$scope.prev={invalid:"invalid"},$scope.works[i+1]?$scope.next={id:$scope.works[i+1].id}:$scope.next={invalid:"invalid"},$(".process-link").attr("href","assets/img/"+$scope.works[i].id+"/"+$scope.works[i].process))},function(err){console.log(err)})}]);